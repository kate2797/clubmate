{% extends 'clubmate/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Ratings
{% endblock %}

{% block body_block %}
    <h1>Ratings</h1>
    <p>Here are the most recent reviews</p>
    <!-- sorting should be buttons as on Discover, but also do not know how to make it work just yet ‚ÄìKate -->

    <!-- todo maybe need js? not sure add it later-->

    {% for rating in page_object_time %}
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title"><a
                        href="{% url 'clubmate:rating_detail' rating.id %}">{{ rating.title }}</a>
                    <span class="badge rounded-pill bg-dark">üëç {{ rating.number_of_upvotes }}</span>
                </h5>
                <p><strong>Author </strong><a
                        href="{% url 'clubmate:profile' rating.author %}">{{ rating.author }}</a></p>
            <p class="card-text"><strong>Club </strong>{{ rating.club.name }}</p>
                <p class="card-text"><strong>Rating</strong> <span
                        class="badge badge-pill badge-dark">‚≠ê {{ rating.rating_score }}</span>
                    <span class="badge badge-pill badge-dark">‚ù§Ô∏è‚Äçü©π {{ rating.user_reported_safety_ }}</span></p>
                <p class="card-text">{{ rating.user_commentary }}</p>
                <p class="card-text"><small class="text-muted">{{ rating.posted_at }}</small></p>
                <!-- Restrict rate/save club functionality when user is not logged in -->
                {% if user.is_authenticated %}
                    <a id="upvote" href="{% url 'clubmate:upvote_rating' rating.id %}"
                       class="btn btn-primary btn-sm">Upvote</a> <!-- Upvote Django-->
                {% endif %}

            </div>
        </div>
    {% endfor %}

    <div class="pagination">
    <span class="step-links">
        {% if page_object_time.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_object_time.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_object_time.number }} of {{ page_object_time.paginator.num_pages }}.
        </span>

        {% if page_object_time.has_next %}
            <a href="?page={{ page_object_time.next_page_number }}">next</a>
            <a href="?page={{ page_object_time.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
    </div>
{% endblock %}