{% extends 'clubmate/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Discover
{% endblock %}

{% block body_block %}
    <h1>Discover</h1>
    <p>Unsure where to go with your friends tonight? We‚Äôve got your back. The best rated clubs are a good place to
        start!</p>

    <!-- Best Rated -->
    <div class="d-inline-flex p-2">
        <div class="card" style="width: 18rem;">
            <div class="card-header">
                Best Rated ü•á
            </div>
            <ul class="list-group list-group-flush">
                {% for club in clubs_by_rating %}
                    <li class="list-group-item"><a href="{% url 'clubmate:club_detail' club.id %}">{{ club.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <!-- Deemed Safe -->
    <div class="d-inline-flex p-2">
        <div class="card" style="width: 18rem;">
            <div class="card-header">
                Reported Safe ‚ù§Ô∏è‚Äçü©π
            </div>
            <ul class="list-group list-group-flush">
                {% for club in safe_clubs %}
                    <li class="list-group-item"><a href="{% url 'clubmate:club_detail' club.id %}">{{ club.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <!-- Cheapest -->
    <div class="d-inline-flex p-2">
        <div class="card" style="width: 18rem;">
            <div class="card-header">
                Cheapest üí∞
            </div>
            <ul class="list-group list-group-flush">
                {% for club in cheapest_clubs %}
                    <li class="list-group-item"><a href="{% url 'clubmate:club_detail' club.id %}">{{ club.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- All Clubs -->
    <h2 class="mt-3 mb-3">See All</h2> <!-- Margin top and bottom on h2 headings -->
    <!-- Filtering options -->
    <div class="filtering-ordering-options btn-group">
        <div class="dropdown mb-3 mr-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Genre
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Alternative</a>
                <a class="dropdown-item" href="#">House</a>
                <a class="dropdown-item" href="#">Techno</a>
            </div>
        </div>
        <div class="dropdown mb-3 mr-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Location
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Glasgow</a>
                <a class="dropdown-item" href="#">London</a>
                <a class="dropdown-item" href="#">Dundee</a>
            </div>
        </div>
        <div class="dropdown mb-3 mr-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Safety
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Safe</a>
                <a class="dropdown-item" href="#">Unsafe</a>
            </div>
        </div>
        <div class="dropdown mb-3 mr-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Age Restrictions
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">18+ Entry</a>
                <a class="dropdown-item" href="#">No Restriction</a>
            </div>
        </div>
        <div class="dropdown mb-3 mr-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                COVID Test Requirements
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">COVID Test Required</a>
                <a class="dropdown-item" href="#">No Requirement</a>
            </div>
        </div>
        <!-- Ordering options -->
        <div class="dropdown mb-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Ordering
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">High to Low</a>
                <a class="dropdown-item" href="#">Low to High</a>
                <a class="dropdown-item" href="#">Most Recent</a>
            </div>
        </div>
    </div>

    {% for club in clubs_by_rating %}
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title"><a href="{% url 'clubmate:club_detail' club.id %}">{{ club.name }}</a> <span
                        class="badge badge-pill badge-dark">‚≠ê {{ club.average_rating_ }}</span> <span
                        class="badge badge-pill badge-dark">‚ù§Ô∏è‚Äçü©π {{ club.user_reported_safety_ }}</span></h5>
                <p class="card-text">{{ club.club_description }}</p>

                <!-- Restrict rate/save club functionality when user is not logged in -->
                {% if user.is_authenticated %}
                    <a href="{% url 'clubmate:rate_detail' club.id %}" class="btn btn-primary">Rate</a> <!-- Working -->
                    <a href="{% url 'clubmate:save_club' club.id %}" class="btn btn-primary">Save</a> <!-- Working -->
                {% endif %}

            </div>
        </div>
    {% endfor %}
    <div class="align-right"><p>Show more</p></div> <!-- TODO: Limit how many shown with JS? -->

{% endblock %}